# 文件分片上传，断点续传和分片下载

## 1.上传

前端采用百度开源框架webuploader，可以实现文件多线程环境下分片上传，等到文件上传结束，服务器再按顺序合并文件。

断点续传的原理就是在文件服务器基于webuploader传来的schunk（当前分片）和schunks（总共分片数）对判断文件是否全部接收，若未完全结束，则会等待，此时前端继续上传，基于当前分片数就可以判断是否已上传，已上传就不用管，接收未上传的分片，直到文件全部上传完成，调用apache的File工具类合并文件即可，在此期间会删除已经合并的文件。

## 2.下载

写了一个单线程下载，把字节流写入浏览器，这里不过多阐述。

分片下载，为了测试方便写死了下载文件和输出文件夹子，分片下载原理和断点续传类似，利用apache的httpclient工具类获取调用单线程下载获取整个文件，再对文件进行分片（取模），多线程区执行下载方法，最后下载到最后就合并文件，期间删除临时分片文件。
